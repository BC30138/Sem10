CC=g++
CFLAGS= -std=c++11 -o0 -Wall
LDFLAGS=

ALGSOURCES=src/algorithm/MainAlg.cpp
ALGSOURCES+=src/algorithm/ThomasAlg.cpp
ALGOBJECTS=$(ALGSOURCES:.cpp=.o)
ALGEXECUTABLE=app/alg.out

MPISOURCES=src/MPI/MainMPI.cpp
MPIOBJECTS=$(MPISOURCES:.cpp=.o)
MPIEXECUTABLE=app/MPIlab.out

OPENMPSOURCES=src/openmp/MainOpenMP.cpp
OPENMPOBJECTS=$(OPENMPSOURCES:.cpp=.o)
OPENMPEXECUTABLE=app/OpenMPlab.out

PTHREADSOURCES=src/pthreads/MainPthreads.cpp
PTHREADOBJECTS=$(PTHREADSOURCES:.cpp=.o)
PTHREADEXECUTABLE=app/pthreadslab.out

alg: $(ALGSOURCES) $(ALGEXECUTABLE)

$(ALGEXECUTABLE): $(ALGOBJECTS)
	$(CC) $(LDFLAGS) $(ALGOBJECTS) -o $@

MPI: $(MPISOURCES) $(MPIEXECUTABLE)

$(MPIEXECUTABLE): $(MPIOBJECTS)
	$(CC) $(LDFLAGS) $(MPIOBJECTS) -o $@

openmp: $(OPENMPSOURCES) $(OPENMPEXECUTABLE)

$(OPENMPEXECUTABLE): $(OPENMPOBJECTS)
	$(CC) $(LDFLAGS) $(OPENMPOBJECTS) -o $@

pthreads: $(PTHREADSOURCES) $(PTHREADEXECUTABLE)

$(PTHREADEXECUTABLE): $(PTHREADOBJECTS)
	$(CC) $(LDFLAGS) $(PTHREADOBJECTS) -o $@

.cpp.o:
	$(CC) $(CFLAGS) $< -c -o $@

clean:
	rm -rf $(ALGOBJECTS) $(ALGEXECUTABLE) $(MPIOBJECTS) $(MPIEXECUTABLE) $(OPENMPOBJECTS) $(OPENMPEXECUTABLE) $(PTHREADOBJECTS) $(PTHREADEXECUTABLE)